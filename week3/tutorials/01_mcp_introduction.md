# ğŸ”Œ MCPåè®®å…¥é—¨

> **å­¦ä¹ ç›®æ ‡**ï¼šç†è§£MCPï¼ˆModel Context Protocolï¼‰çš„è®¾è®¡ç†å¿µã€æ¶æ„å’Œæ ¸å¿ƒæ¦‚å¿µ

---

## 1. ä»€ä¹ˆæ˜¯MCPï¼Ÿ

### 1.1 èƒŒæ™¯ä¸åŠ¨æœº

**é—®é¢˜**ï¼šAIæ¨¡å‹æ˜¯"å°é—­"çš„ï¼Œæ— æ³•ç›´æ¥è®¿é—®ï¼š
- âŒ æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- âŒ æ•°æ®åº“
- âŒ å¤–éƒ¨API
- âŒ å®æ—¶ä¿¡æ¯

**ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ**ï¼šFunction Calling
- éœ€è¦åœ¨æ¯ä¸ªåº”ç”¨ä¸­é‡å¤å®šä¹‰
- ä¸åŒå‚å•†APIæ ¼å¼ä¸åŒ
- å®‰å…¨æ€§å–å†³äºå®ç°

**MCPè§£å†³æ–¹æ¡ˆ**ï¼š
- âœ… ç»Ÿä¸€æ ‡å‡†åè®®
- âœ… ç‹¬ç«‹è¿›ç¨‹è¿è¡Œï¼ˆå®‰å…¨éš”ç¦»ï¼‰
- âœ… ä¸€æ¬¡å¼€å‘ï¼Œå¤šå¤„å¤ç”¨
- âœ… å†…ç½®å®‰å…¨æœºåˆ¶

### 1.2 æ ¸å¿ƒæ¦‚å¿µ

```
MCPåè®®å®šä¹‰ä¸‰ç§èƒ½åŠ›ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MCP Server                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Tools       â”‚    Resources    â”‚        Prompts          â”‚
â”‚   (å·¥å…·/å‡½æ•°)   â”‚   (èµ„æº/æ•°æ®)   â”‚     (æç¤ºè¯æ¨¡æ¿)        â”‚
â”‚                 â”‚                 â”‚                         â”‚
â”‚  - æœç´¢æ–‡ä»¶     â”‚  - æ–‡ä»¶å†…å®¹     â”‚  - "æ€»ç»“è¿™ä¸ªæ–‡æ¡£"       â”‚
â”‚  - æ‰§è¡Œå‘½ä»¤     â”‚  - æ•°æ®åº“è®°å½•   â”‚  - "åˆ†æè¿™æ®µä»£ç "       â”‚
â”‚  - è°ƒç”¨API      â”‚  - APIå“åº”      â”‚  - "ç¿»è¯‘æˆä¸­æ–‡"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **Tool** | AIå¯ä»¥è°ƒç”¨çš„å‡½æ•° | `search_files()`, `send_email()` |
| **Resource** | AIå¯ä»¥è¯»å–çš„æ•°æ® | æ–‡ä»¶å†…å®¹ã€æ•°æ®åº“è®°å½• |
| **Prompt** | é¢„å®šä¹‰çš„æç¤ºè¯æ¨¡æ¿ | "æ€»ç»“æ–‡æ¡£"ã€"ä»£ç å®¡æŸ¥" |

---

## 2. MCPæ¶æ„

### 2.1 ç»„ä»¶å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MCP Host                                â”‚
â”‚  (Claude Desktop / IDEæ’ä»¶ / è‡ªå®šä¹‰å®¢æˆ·ç«¯)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ JSON-RPC over stdio/SSE
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        MCP Client           â”‚
              â”‚  (å†…ç½®äºHostçš„åè®®å¤„ç†å™¨)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCP Server 1  â”‚ â”‚   MCP Server 2  â”‚ â”‚   MCP Server 3  â”‚
â”‚   (æ–‡ä»¶ç³»ç»Ÿ)    â”‚ â”‚   (æ•°æ®åº“)      â”‚ â”‚   (Webæœç´¢)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é€šä¿¡æµç¨‹

```
ç”¨æˆ·: "å¸®æˆ‘æœç´¢é¡¹ç›®ä¸­çš„Pythonæ–‡ä»¶"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Claudeåˆ†æè¯·æ±‚ï¼Œå†³å®šè°ƒç”¨ search_files å·¥å…·               â”‚
â”‚                                                              â”‚
â”‚ 2. Claude Desktopå‘é€JSON-RPCè¯·æ±‚åˆ°MCP Server               â”‚
â”‚    â†’ {"method": "tools/call", "params": {"name": "search_files", ...}}â”‚
â”‚                                                              â”‚
â”‚ 3. MCP Serveræ‰§è¡Œæœç´¢ï¼Œè¿”å›ç»“æœ                              â”‚
â”‚    â† {"result": {"content": [{"type": "text", "text": "..."}]}}     â”‚
â”‚                                                              â”‚
â”‚ 4. Claudeæ ¹æ®ç»“æœç”Ÿæˆå›å¤                                    â”‚
â”‚    "æˆ‘æ‰¾åˆ°äº†ä»¥ä¸‹Pythonæ–‡ä»¶ï¼š..."                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. JSON-RPC 2.0åè®®

### 3.1 æ¶ˆæ¯æ ¼å¼

**è¯·æ±‚ï¼ˆRequestï¼‰**ï¼š
```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "search_files",
    "arguments": {
      "pattern": "*.py"
    }
  }
}
```

**å“åº”ï¼ˆResponseï¼‰**ï¼š
```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "æ‰¾åˆ°5ä¸ªæ–‡ä»¶..."
      }
    ]
  }
}
```

**é”™è¯¯ï¼ˆErrorï¼‰**ï¼š
```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "error": {
    "code": -32600,
    "message": "Invalid request"
  }
}
```

### 3.2 æ ¸å¿ƒæ–¹æ³•

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `initialize` | åˆå§‹åŒ–è¿æ¥ï¼Œäº¤æ¢èƒ½åŠ›ä¿¡æ¯ |
| `tools/list` | åˆ—å‡ºæ‰€æœ‰å¯ç”¨å·¥å…· |
| `tools/call` | è°ƒç”¨æŒ‡å®šå·¥å…· |
| `resources/list` | åˆ—å‡ºæ‰€æœ‰å¯ç”¨èµ„æº |
| `resources/read` | è¯»å–æŒ‡å®šèµ„æº |
| `prompts/list` | åˆ—å‡ºæ‰€æœ‰æç¤ºè¯æ¨¡æ¿ |
| `prompts/get` | è·å–æŒ‡å®šæç¤ºè¯ |

---

## 4. MCP vs Function Calling

### 4.1 å¯¹æ¯”è¡¨

| å¯¹æ¯”é¡¹ | Function Calling | MCP |
|--------|------------------|-----|
| **æ ‡å‡†åŒ–** | å„å‚å•†ä¸åŒï¼ˆOpenAI/Anthropic/DeepSeekï¼‰ | ç»Ÿä¸€å¼€æ”¾æ ‡å‡† |
| **è¿è¡Œä½ç½®** | éœ€è¦ä½ è‡ªå·±å®ç°æ‰§è¡Œé€»è¾‘ | ç‹¬ç«‹è¿›ç¨‹è‡ªåŠ¨æ‰§è¡Œ |
| **å®‰å…¨éš”ç¦»** | ä¸åº”ç”¨å…±äº«è¿›ç¨‹ | è¿›ç¨‹çº§éš”ç¦» |
| **å¯å¤ç”¨æ€§** | éœ€è¦åœ¨æ¯ä¸ªåº”ç”¨é‡å¤å®šä¹‰ | ä¸€ä¸ªServerå¤šä¸ªHostä½¿ç”¨ |
| **ç”Ÿæ€ç³»ç»Ÿ** | ç¢ç‰‡åŒ– | ç»Ÿä¸€ç”Ÿæ€ |

### 4.2 ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆï¼Ÿ

**ä½¿ç”¨Function Calling**ï¼š
- ç®€å•åœºæ™¯ï¼Œåªéœ€å‡ ä¸ªå‡½æ•°
- éœ€è¦ä¸ç‰¹å®šAPIæ·±åº¦é›†æˆ
- ä¸éœ€è¦è·¨åº”ç”¨å¤ç”¨

**ä½¿ç”¨MCP**ï¼š
- éœ€è¦è®¿é—®æœ¬åœ°èµ„æºï¼ˆæ–‡ä»¶ã€æ•°æ®åº“ï¼‰
- æƒ³è¦æ„å»ºå¯å¤ç”¨çš„å·¥å…·é›†
- ä¸Claude Desktopç­‰Hosté›†æˆ
- éœ€è¦æ›´å¥½çš„å®‰å…¨éš”ç¦»

---

## 5. ç¬¬ä¸€ä¸ªMCP Serveré¢„è§ˆ

```python
from fastmcp import FastMCP
import os

# åˆ›å»ºMCP Server
mcp = FastMCP("æ–‡ä»¶åŠ©æ‰‹")

@mcp.tool()
def list_directory(path: str = ".") -> str:
    """åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹"""
    try:
        items = os.listdir(path)
        return "\n".join(items)
    except Exception as e:
        return f"é”™è¯¯: {e}"

@mcp.tool()
def read_file(filepath: str) -> str:
    """è¯»å–æ–‡ä»¶å†…å®¹"""
    try:
        with open(filepath, 'r', encoding='utf-8') as f:
            return f.read()
    except Exception as e:
        return f"é”™è¯¯: {e}"

if __name__ == "__main__":
    mcp.run()
```

---

## ğŸ“º æ¨èBç«™è§†é¢‘

| UPä¸» | è§†é¢‘æ ‡é¢˜ | é“¾æ¥ |
|------|---------|------|
| AIè¿›åŒ–è®º | MCPåè®®10åˆ†é’Ÿå…¥é—¨ | https://www.bilibili.com/video/BV1C5411X7Kg |
| Anthropicå®˜æ–¹ | MCP Protocolä»‹ç» | https://www.bilibili.com/video/BV1nB4y1J7Jz |

---

## 6. ç»§ç»­å­¦ä¹ 

å­¦å®ŒMCPå…¥é—¨åï¼Œåœ¨å·¦ä¾§èœå•é€‰æ‹©ä¸‹ä¸€ä¸ªæ•™ç¨‹ï¼š

ğŸ“Œ **Week 3 å­¦ä¹ é¡ºåº**ï¼š
1. âœ… MCPåè®®å…¥é—¨ï¼ˆæœ¬æ•™ç¨‹ï¼‰
2. â¡ï¸ FastMCPåŸºç¡€æ•™ç¨‹
3. â¡ï¸ MCP Toolså¼€å‘æŒ‡å—
4. â¡ï¸ MCP Resourceså¼€å‘æŒ‡å—
5. â¡ï¸ Claude Desktopé›†æˆ

---

**MCPæ˜¯è¿æ¥AIä¸çœŸå®ä¸–ç•Œçš„æ¡¥æ¢ï¼ğŸ’ª**
