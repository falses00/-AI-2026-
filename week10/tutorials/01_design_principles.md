# ğŸ“˜ AIäº§å“è®¾è®¡åå¤§åŸåˆ™

> **å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡AIäº§å“è®¾è®¡æ ¸å¿ƒåŸåˆ™ï¼Œæ‰“é€ å‡ºè‰²ç”¨æˆ·ä½“éªŒ

---

## ğŸ¯ æœ¬æ•™ç¨‹ç›®æ ‡

å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- âœ… ç†è§£AIäº§å“çš„ç‹¬ç‰¹è®¾è®¡æŒ‘æˆ˜
- âœ… åº”ç”¨åå¤§è®¾è®¡åŸåˆ™
- âœ… è®¾è®¡æœ‰æ•ˆçš„AIäº¤äº’
- âœ… å¤„ç†AIçš„ä¸ç¡®å®šæ€§

---

## ğŸ“š åå¤§è®¾è®¡åŸåˆ™

### 1. é€æ˜æ€§åŸåˆ™ ğŸ”

**è®©ç”¨æˆ·çŸ¥é“åœ¨ä¸AIäº¤äº’**

```python
# âœ… å¥½çš„åšæ³•ï¼šæ˜ç¡®æ ‡è¯†AIèº«ä»½
welcome_message = """
ğŸ¤– æ‚¨å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹å°æ™ºã€‚

æˆ‘å¯ä»¥å¸®æ‚¨ï¼š
â€¢ å›ç­”é—®é¢˜
â€¢ åˆ†ææ–‡æ¡£
â€¢ æ’°å†™å†…å®¹

è¯·æ³¨æ„ï¼šæˆ‘çš„å›ç­”ä»…ä¾›å‚è€ƒï¼Œé‡è¦å†³ç­–è¯·å’¨è¯¢ä¸“ä¸šäººå£«ã€‚
"""

# âŒ ä¸å¥½çš„åšæ³•ï¼šéšè—AIèº«ä»½
bad_message = "æ‚¨å¥½ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨ï¼Ÿ"  # ç”¨æˆ·ä¸çŸ¥é“åœ¨å’ŒAIå¯¹è¯
```

---

### 2. å¯æ§æ€§åŸåˆ™ ğŸ®

**ç”¨æˆ·å¯ä»¥çº æ­£/æ‹’ç»AIå»ºè®®**

```python
class ControllableAI:
    def generate_with_options(self, prompt: str) -> dict:
        """æä¾›å¤šä¸ªé€‰é¡¹è®©ç”¨æˆ·é€‰æ‹©"""
        response = self.llm.generate(prompt)
        
        return {
            "main_suggestion": response,
            "alternatives": [
                "æ¢ä¸€ç§è¡¨è¾¾æ–¹å¼",
                "æ›´æ­£å¼çš„ç‰ˆæœ¬",
                "æ›´ç®€æ´çš„ç‰ˆæœ¬"
            ],
            "actions": [
                {"label": "é‡‡çº³", "action": "accept"},
                {"label": "ä¿®æ”¹", "action": "edit"},
                {"label": "é‡æ–°ç”Ÿæˆ", "action": "regenerate"},
                {"label": "å–æ¶ˆ", "action": "cancel"}
            ]
        }
```

---

### 3. å¯é¢„æµ‹æ€§åŸåˆ™ ğŸ¯

**ç›¸ä¼¼è¾“å…¥äº§ç”Ÿç›¸ä¼¼è¾“å‡º**

```python
# ä½¿ç”¨å›ºå®štemperatureä¿æŒä¸€è‡´æ€§
STABLE_CONFIG = {
    "temperature": 0.3,  # ä½æ¸©åº¦=æ›´ç¨³å®š
    "top_p": 0.9,
    "seed": 42  # å›ºå®šç§å­
}

# ç¼“å­˜ç›¸ä¼¼æŸ¥è¯¢çš„ç»“æœ
from functools import lru_cache

@lru_cache(maxsize=1000)
def cached_response(query_hash: str) -> str:
    # ç›¸åŒé—®é¢˜è¿”å›ç¼“å­˜çš„ç­”æ¡ˆ
    pass
```

---

### 4. æ¸è¿›æŠ«éœ²åŸåˆ™ ğŸ“Š

**å¤æ‚åŠŸèƒ½é€æ­¥å±•ç¤º**

```
é¦–æ¬¡ä½¿ç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ ç®€å•é—®ç­”åŠŸèƒ½                     â”‚
â”‚  "é—®æˆ‘ä»»ä½•é—®é¢˜ï¼"                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨3æ¬¡åï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ é—®ç­”  ğŸ“„ æ–‡æ¡£åˆ†æ                â”‚
â”‚  è¯•è¯•ä¸Šä¼ æ–‡æ¡£è·å–æ›´ç²¾å‡†çš„å›ç­”        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨10æ¬¡åï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ é—®ç­”  ğŸ“„ æ–‡æ¡£  âš™ï¸ é«˜çº§è®¾ç½®       â”‚
â”‚  è§£é”ï¼šè‡ªå®šä¹‰æç¤ºè¯ã€æ¨¡å‹é€‰æ‹©...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5. ä¼˜é›…é™çº§åŸåˆ™ âš¡

**AIå¤±è´¥æ—¶æœ‰å¤‡é€‰æ–¹æ¡ˆ**

```python
async def resilient_ai_call(query: str) -> str:
    """å¸¦é™çº§ç­–ç•¥çš„AIè°ƒç”¨"""
    
    # ç­–ç•¥1ï¼šä¸»æ¨¡å‹
    try:
        return await call_primary_model(query)
    except Exception as e:
        log.warning(f"ä¸»æ¨¡å‹å¤±è´¥: {e}")
    
    # ç­–ç•¥2ï¼šå¤‡ç”¨æ¨¡å‹
    try:
        return await call_backup_model(query)
    except Exception as e:
        log.warning(f"å¤‡ç”¨æ¨¡å‹å¤±è´¥: {e}")
    
    # ç­–ç•¥3ï¼šè§„åˆ™åŒ¹é…
    rule_response = match_faq_rules(query)
    if rule_response:
        return rule_response
    
    # ç­–ç•¥4ï¼šå‹å¥½æç¤º
    return """æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å¤„ç†æ‚¨çš„è¯·æ±‚ã€‚

æ‚¨å¯ä»¥ï¼š
â€¢ ç¨åé‡è¯•
â€¢ æ¢ä¸€ç§é—®æ³•
â€¢ è”ç³»äººå·¥å®¢æœï¼š400-xxx-xxxx"""
```

---

### 6. åŠæ—¶åé¦ˆåŸåˆ™ â±ï¸

**è®©ç”¨æˆ·çŸ¥é“AIåœ¨å¤„ç†ä¸­**

```python
# æµå¼è¾“å‡º + è¿›åº¦æç¤º
async def stream_with_status(query: str):
    yield "ğŸ” æ­£åœ¨ç†è§£æ‚¨çš„é—®é¢˜...\n"
    
    # æ£€ç´¢ç›¸å…³æ–‡æ¡£
    yield "ğŸ“š æœç´¢ç›¸å…³èµ„æ–™ä¸­...\n"
    docs = await retrieve_documents(query)
    yield f"âœ… æ‰¾åˆ° {len(docs)} ä»½ç›¸å…³æ–‡æ¡£\n\n"
    
    # æµå¼ç”Ÿæˆå›ç­”
    yield "ğŸ’­ æ­£åœ¨ç”Ÿæˆå›ç­”...\n\n"
    async for chunk in generate_stream(query, docs):
        yield chunk
    
    yield "\n\nâœ¨ å›ç­”å®Œæˆï¼"
```

---

### 7-10. æ›´å¤šåŸåˆ™

| åŸåˆ™ | æ ¸å¿ƒè¦ç‚¹ | å®ç°æ–¹å¼ |
|------|---------|---------|
| 7. å»ºç«‹ä¿¡ä»» | å±•ç¤ºAIèƒ½åŠ›è¾¹ç•Œ | è¯´æ˜ä¸èƒ½åšä»€ä¹ˆ |
| 8. ä¿æŠ¤éšç§ | æ˜ç¡®æ•°æ®ç”¨é€” | æä¾›éšç§è®¾ç½® |
| 9. é¿å…åè§ | æ£€æµ‹æœ‰å®³è¾“å‡º | å†…å®¹è¿‡æ»¤ |
| 10. æŒç»­å­¦ä¹  | æ”¶é›†åé¦ˆæ”¹è¿› | ç‚¹èµ/è¸©æœºåˆ¶ |

---

## ğŸ“Š å­¦ä¹ æ£€æŸ¥æ¸…å•

- [ ] ç†è§£AIäº§å“çš„ç‹¬ç‰¹æŒ‘æˆ˜
- [ ] èƒ½åº”ç”¨é€æ˜æ€§åŸåˆ™
- [ ] ä¼šè®¾è®¡å¯æ§çš„AIäº¤äº’
- [ ] ç†è§£ä¼˜é›…é™çº§ç­–ç•¥

---

## ğŸ¯ ä¸‹ä¸€æ­¥

ç»§ç»­å­¦ä¹ ï¼š[å¯¹è¯äº¤äº’è®¾è®¡](./02_conversation_design.md)
