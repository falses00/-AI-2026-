# âœ¨ UXä¼˜åŒ–å®æˆ˜é¡¹ç›®

> **Week 10 ç»¼åˆå®æˆ˜é¡¹ç›®** - AIåº”ç”¨çš„ç”¨æˆ·ä½“éªŒä¼˜åŒ–

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

å¯¹ç°æœ‰AIå¯¹è¯ç³»ç»Ÿè¿›è¡Œå…¨é¢UXä¼˜åŒ–ï¼ŒåŒ…æ‹¬ï¼š
- å¯¹è¯æµç¨‹ä¼˜åŒ–
- é”™è¯¯å¤„ç†æ”¹è¿›
- åŠ è½½çŠ¶æ€è®¾è®¡
- æ— éšœç¢æ”¯æŒ

---

## ğŸ“Š ä¼˜åŒ–æ¡†æ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AI UXä¼˜åŒ–æ¡†æ¶                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    1ï¸âƒ£ æ„ŸçŸ¥å±‚ä¼˜åŒ–                             â”‚ â”‚
â”‚  â”‚  â€¢ åŠ è½½åŠ¨ç”»    â€¢ è¿›åº¦åé¦ˆ    â€¢ ç»“æœå±•ç¤º    â€¢ é”™è¯¯æç¤º       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                    â”‚
â”‚                              â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    2ï¸âƒ£ äº¤äº’å±‚ä¼˜åŒ–                             â”‚ â”‚
â”‚  â”‚  â€¢ è¾“å…¥å»ºè®®    â€¢ å¿«æ·æ“ä½œ    â€¢ å†å²è®°å½•    â€¢ ä¸Šä¸‹æ–‡ä¿æŒ     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                    â”‚
â”‚                              â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    3ï¸âƒ£ è®¤çŸ¥å±‚ä¼˜åŒ–                             â”‚ â”‚
â”‚  â”‚  â€¢ æœŸæœ›ç®¡ç†    â€¢ èƒ½åŠ›è¾¹ç•Œ    â€¢ ç½®ä¿¡åº¦æ˜¾ç¤º  â€¢ å¼•å¯¼å¼å¯¹è¯     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
week10/projects/ux_optimization/
â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶
â”œâ”€â”€ before/                # ä¼˜åŒ–å‰ä»£ç 
â”‚   â””â”€â”€ chat_app.py
â”œâ”€â”€ after/                 # ä¼˜åŒ–åä»£ç 
â”‚   â””â”€â”€ chat_app.py
â”œâ”€â”€ components/            # UIç»„ä»¶
â”‚   â”œâ”€â”€ loading.py
â”‚   â”œâ”€â”€ error_handler.py
â”‚   â””â”€â”€ suggestions.py
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_ux.py        # UXæµ‹è¯•
â””â”€â”€ docs/
    â””â”€â”€ ux_guidelines.md  # UXè§„èŒƒæ–‡æ¡£
```

---

## ğŸ”§ æ ¸å¿ƒä¼˜åŒ–

### 1. æµå¼å“åº”ä¸æ‰“å­—æœºæ•ˆæœ

```python
from fastapi import FastAPI
from fastapi.responses import StreamingResponse
import asyncio

app = FastAPI()

async def stream_response(prompt: str):
    """æµå¼ç”Ÿæˆå“åº”ï¼Œæä¾›å³æ—¶åé¦ˆ"""
    # æ˜¾ç¤ºæ€è€ƒçŠ¶æ€
    yield "data: {\"type\": \"thinking\", \"content\": \"æ€è€ƒä¸­...\"}\n\n"
    await asyncio.sleep(0.5)
    
    # è°ƒç”¨LLM
    response = await call_llm_stream(prompt)
    
    async for chunk in response:
        yield f"data: {{\"type\": \"content\", \"content\": \"{chunk}\"}}\n\n"
        await asyncio.sleep(0.02)  # æ§åˆ¶æ‰“å­—é€Ÿåº¦
    
    # å®Œæˆæ ‡è®°
    yield "data: {\"type\": \"done\"}\n\n"

@app.post("/chat/stream")
async def chat_stream(message: str):
    return StreamingResponse(
        stream_response(message),
        media_type="text/event-stream"
    )
```

### 2. æ™ºèƒ½è¾“å…¥å»ºè®®

```python
class InputSuggestionSystem:
    """è¾“å…¥å»ºè®®ç³»ç»Ÿ"""
    
    def __init__(self):
        self.common_queries = [
            "å¸®æˆ‘åˆ†æè¿™ä»½æ–‡æ¡£",
            "æ€»ç»“ä¸€ä¸‹ä¸»è¦å†…å®¹",
            "è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µ",
            "ç”Ÿæˆä¸€ä»½æŠ¥å‘Š"
        ]
        self.context_suggestions = {}
    
    def get_suggestions(self, partial_input: str, context: dict = None) -> list:
        """è·å–è¾“å…¥å»ºè®®"""
        suggestions = []
        
        # 1. åŸºäºè¾“å…¥å‰ç¼€åŒ¹é…
        for query in self.common_queries:
            if partial_input.lower() in query.lower():
                suggestions.append({
                    "text": query,
                    "type": "common"
                })
        
        # 2. åŸºäºä¸Šä¸‹æ–‡æ¨è
        if context and context.get("last_topic"):
            topic = context["last_topic"]
            suggestions.append({
                "text": f"ç»§ç»­è®¨è®º{topic}",
                "type": "context"
            })
        
        # 3. å¿«æ·æ“ä½œ
        if len(partial_input) < 3:
            suggestions.extend([
                {"text": "/æ¸…ç©ºå¯¹è¯", "type": "action"},
                {"text": "/å¯¼å‡ºè®°å½•", "type": "action"},
            ])
        
        return suggestions[:5]
```

### 3. ä¼˜é›…çš„é”™è¯¯å¤„ç†

```python
from enum import Enum
from dataclasses import dataclass

class ErrorLevel(Enum):
    INFO = "info"
    WARNING = "warning"
    ERROR = "error"

@dataclass
class UserFriendlyError:
    """ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯"""
    level: ErrorLevel
    title: str
    message: str
    suggestion: str
    can_retry: bool = True
    retry_after: int = None

class ErrorHandler:
    """é”™è¯¯å¤„ç†å™¨"""
    
    ERROR_TEMPLATES = {
        "rate_limit": UserFriendlyError(
            level=ErrorLevel.WARNING,
            title="è¯·æ±‚è¿‡äºé¢‘ç¹",
            message="æ‚¨çš„æé—®é€Ÿåº¦å¤ªå¿«äº†ï¼Œè¯·ç¨ç­‰ç‰‡åˆ»ã€‚",
            suggestion="å»ºè®®ç­‰å¾…{seconds}ç§’åé‡è¯•",
            can_retry=True,
            retry_after=30
        ),
        "input_too_long": UserFriendlyError(
            level=ErrorLevel.INFO,
            title="è¾“å…¥å†…å®¹è¿‡é•¿",
            message="æ‚¨çš„è¾“å…¥è¶…å‡ºäº†å¤„ç†èƒ½åŠ›ã€‚",
            suggestion="è¯·å°è¯•ç²¾ç®€å†…å®¹ï¼Œæˆ–åˆ†æ®µæé—®",
            can_retry=True
        ),
        "service_unavailable": UserFriendlyError(
            level=ErrorLevel.ERROR,
            title="æœåŠ¡æš‚æ—¶ä¸å¯ç”¨",
            message="AIåŠ©æ‰‹æ­£åœ¨ç»´æŠ¤ä¸­ã€‚",
            suggestion="è¯·ç¨åå†è¯•ï¼Œæˆ–è”ç³»å®¢æœè·å–å¸®åŠ©",
            can_retry=True,
            retry_after=60
        ),
        "network_error": UserFriendlyError(
            level=ErrorLevel.WARNING,
            title="ç½‘ç»œè¿æ¥é—®é¢˜",
            message="æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ã€‚",
            suggestion="è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•",
            can_retry=True
        )
    }
    
    @classmethod
    def handle(cls, error_type: str, **kwargs) -> dict:
        """å¤„ç†é”™è¯¯å¹¶è¿”å›ç”¨æˆ·å‹å¥½çš„å“åº”"""
        template = cls.ERROR_TEMPLATES.get(error_type)
        if not template:
            template = UserFriendlyError(
                level=ErrorLevel.ERROR,
                title="å‡ºç°äº†é—®é¢˜",
                message="æœåŠ¡é‡åˆ°äº†æ„å¤–æƒ…å†µã€‚",
                suggestion="è¯·ç¨åé‡è¯•"
            )
        
        return {
            "success": False,
            "error": {
                "level": template.level.value,
                "title": template.title,
                "message": template.message,
                "suggestion": template.suggestion.format(**kwargs),
                "canRetry": template.can_retry,
                "retryAfter": template.retry_after
            }
        }
```

### 4. åŠ è½½çŠ¶æ€ç®¡ç†

```python
class LoadingStateManager:
    """åŠ è½½çŠ¶æ€ç®¡ç†"""
    
    STATES = {
        "connecting": {
            "message": "æ­£åœ¨è¿æ¥...",
            "icon": "ğŸ”„",
            "animation": "pulse"
        },
        "thinking": {
            "message": "AIæ­£åœ¨æ€è€ƒ...",
            "icon": "ğŸ§ ",
            "animation": "bounce"
        },
        "searching": {
            "message": "æ­£åœ¨æœç´¢ç›¸å…³ä¿¡æ¯...",
            "icon": "ğŸ”",
            "animation": "spin"
        },
        "generating": {
            "message": "æ­£åœ¨ç”Ÿæˆå›ç­”...",
            "icon": "âœï¸",
            "animation": "typing"
        },
        "almost_done": {
            "message": "é©¬ä¸Šå°±å¥½...",
            "icon": "â³",
            "animation": "pulse"
        }
    }
    
    def __init__(self):
        self.current_state = None
        self.start_time = None
    
    def set_state(self, state: str):
        """è®¾ç½®çŠ¶æ€"""
        if state in self.STATES:
            self.current_state = state
            return self.STATES[state]
        return None
    
    def get_adaptive_message(self, elapsed_seconds: float) -> dict:
        """æ ¹æ®ç­‰å¾…æ—¶é—´è°ƒæ•´æ¶ˆæ¯"""
        if elapsed_seconds < 2:
            return self.STATES["thinking"]
        elif elapsed_seconds < 5:
            return self.STATES["generating"]
        elif elapsed_seconds < 10:
            return self.STATES["almost_done"]
        else:
            return {
                "message": "ä»åœ¨å¤„ç†ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…...",
                "icon": "â°",
                "animation": "pulse",
                "showProgress": True
            }
```

### 5. ç½®ä¿¡åº¦æ˜¾ç¤º

```python
def format_response_with_confidence(response: str, confidence: float) -> dict:
    """ä¸ºå“åº”æ·»åŠ ç½®ä¿¡åº¦æ ‡è¯†"""
    
    if confidence >= 0.9:
        marker = ""  # é«˜ç½®ä¿¡åº¦ä¸æ˜¾ç¤º
        disclaimer = None
    elif confidence >= 0.7:
        marker = "â„¹ï¸ "
        disclaimer = "æ­¤å›ç­”åŸºäºæœ‰é™ä¿¡æ¯ï¼Œå»ºè®®è¿›ä¸€æ­¥éªŒè¯ã€‚"
    elif confidence >= 0.5:
        marker = "âš ï¸ "
        disclaimer = "æˆ‘å¯¹è¿™ä¸ªå›ç­”ä¸å¤ªç¡®å®šï¼Œè¯·è°¨æ…å‚è€ƒã€‚"
    else:
        marker = "â“ "
        disclaimer = "ä¿¡æ¯å¯èƒ½ä¸å‡†ç¡®ï¼Œå»ºè®®æŸ¥é˜…å…¶ä»–æ¥æºã€‚"
    
    return {
        "content": response,
        "confidence": confidence,
        "confidenceLevel": "high" if confidence >= 0.9 else "medium" if confidence >= 0.7 else "low",
        "disclaimer": disclaimer,
        "marker": marker
    }
```

---

## ğŸ“‹ UXæ£€æŸ¥æ¸…å•

### å“åº”æ€§
- [ ] ç”¨æˆ·æ“ä½œå100mså†…æœ‰è§†è§‰åé¦ˆ
- [ ] é•¿æ“ä½œæ˜¾ç¤ºè¿›åº¦çŠ¶æ€
- [ ] æµå¼è¾“å‡ºå‡å°‘ç­‰å¾…æ„Ÿ

### å®¹é”™æ€§
- [ ] æ‰€æœ‰é”™è¯¯æœ‰ç”¨æˆ·å‹å¥½æç¤º
- [ ] æ”¯æŒé‡è¯•æ“ä½œ
- [ ] ç½‘ç»œæ–­å¼€æ—¶æœ‰ç¦»çº¿æç¤º

### å¯ç†è§£æ€§
- [ ] AIèƒ½åŠ›è¾¹ç•Œæ¸…æ™°è¯´æ˜
- [ ] ä¸ç¡®å®šå›ç­”æœ‰æ ‡è¯†
- [ ] å¼•å¯¼ç”¨æˆ·æ­£ç¡®ä½¿ç”¨

### å¯æ§æ€§
- [ ] æ”¯æŒä¸­æ–­ç”Ÿæˆ
- [ ] æ”¯æŒé‡æ–°ç”Ÿæˆ
- [ ] æ”¯æŒç¼–è¾‘å†å²

---

## ğŸ“Š å­¦ä¹ æ”¶è·

- [x] AIäº§å“UXè®¾è®¡åŸåˆ™
- [x] æµå¼å“åº”å®ç°
- [x] ä¼˜é›…é”™è¯¯å¤„ç†
- [x] ç”¨æˆ·æœŸæœ›ç®¡ç†
